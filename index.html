<!-- UPDATED FULL FILE WITH ALL 5 REQUESTS IMPLEMENTED -->
<!-- ✓ FITB questions auto-generated from even pages of image occlusion PDF -->
<!-- ✓ IDs auto-renumbered -->
<!-- ✓ Grouped by page/module -->
<!-- ✓ Page progress indicator added -->
<!-- ✓ GitHub-ready (expects /images folder) -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Image Occlusion FITB Quiz</title>

  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 min-h-screen flex items-center justify-center">
<div id="root"></div>

<script type="text/babel">

/* ================= LENIENT MATCHING (UNCHANGED) ================= */
const STOP = new Set(["a","an","the","of","to","and","for","in","on","at","is"]);
const norm = s => String(s||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim();
const eqLoose = (a,b)=>norm(a)===norm(b);
const matchFITB = (u,arr)=>arr.some(a=>eqLoose(a,u));

/* ================= QUESTIONS (AUTO-GENERATED) ================= */
const QUESTIONS = [

// ---------- PAGE 2 ----------
{ id:1, page:2, label:"2-1", prompt:"______", answers:["signal"], imageSrc:"images/image2.png" },
{ id:2, page:2, label:"2-2", prompt:"______", answers:["chromatin modification"], imageSrc:"images/image2.png" },
{ id:3, page:2, label:"2-3", prompt:"______", answers:["transcription"], imageSrc:"images/image2.png" },
{ id:4, page:2, label:"2-4", prompt:"______", answers:["mRNA degradation"], imageSrc:"images/image2.png" },
{ id:5, page:2, label:"2-5", prompt:"______", answers:["protein degradation"], imageSrc:"images/image2.png" },

// ---------- PAGE 4 ----------
{ id:6, page:4, label:"4-1", prompt:"______", answers:["DNA"], imageSrc:"images/image4.png" },
{ id:7, page:4, label:"4-2", prompt:"______", answers:["chromatin"], imageSrc:"images/image4.png" },
{ id:8, page:4, label:"4-3", prompt:"______", answers:["methyl group"], imageSrc:"images/image4.png" },
{ id:9, page:4, label:"4-4", prompt:"______", answers:["acetyl group"], imageSrc:"images/image4.png" },

// ---------- PAGE 6 ----------
{ id:10, page:6, label:"6-1", prompt:"______", answers:["methylation"], imageSrc:"images/image6.png" },
{ id:11, page:6, label:"6-2", prompt:"______", answers:["acetylation"], imageSrc:"images/image6.png" },

// ---------- PAGE 8 ----------
{ id:12, page:8, label:"8-1", prompt:"______", answers:["tryptophan"], imageSrc:"images/image8.png" },
{ id:13, page:8, label:"8-2", prompt:"______", answers:["blocked"], imageSrc:"images/image8.png" },
{ id:14, page:8, label:"8-3", prompt:"______", answers:["tryptophan"], imageSrc:"images/image8.png" },
{ id:15, page:8, label:"8-4", prompt:"______", answers:["absence"], imageSrc:"images/image8.png" },
{ id:16, page:8, label:"8-5", prompt:"______", answers:["repressor"], imageSrc:"images/image8.png" },

// ---------- PAGE 12 ----------
{ id:17, page:12, label:"12-1", prompt:"______", answers:["cAMP"], imageSrc:"images/image12.png" },
{ id:18, page:12, label:"12-2", prompt:"______", answers:["low"], imageSrc:"images/image12.png" },
{ id:19, page:12, label:"12-3", prompt:"______", answers:["transcription"], imageSrc:"images/image12.png" },

// ---------- PAGE 14 ----------
{ id:20, page:14, label:"14-1", prompt:"______", answers:["enhancer"], imageSrc:"images/image14.png" },
{ id:21, page:14, label:"14-2", prompt:"______", answers:["promoter"], imageSrc:"images/image14.png" },
{ id:22, page:14, label:"14-3", prompt:"______", answers:["mediator"], imageSrc:"images/image14.png" },
{ id:23, page:14, label:"14-4", prompt:"______", answers:["RNA synthesis"], imageSrc:"images/image14.png" },

// ---------- PAGE 16 ----------
{ id:24, page:16, label:"16-1", prompt:"______", answers:["albumin activators"], imageSrc:"images/image16.png" },
{ id:25, page:16, label:"16-2", prompt:"______", answers:["albumin gene"], imageSrc:"images/image16.png" },
{ id:26, page:16, label:"16-3", prompt:"______", answers:["off"], imageSrc:"images/image16.png" },

// ---------- PAGE 18 ----------
{ id:27, page:18, label:"18-1", prompt:"______", answers:["crystallin activators"], imageSrc:"images/image18.png" },
{ id:28, page:18, label:"18-2", prompt:"______", answers:["crystallin gene"], imageSrc:"images/image18.png" },
{ id:29, page:18, label:"18-3", prompt:"______", answers:["off"], imageSrc:"images/image18.png" },
];

/* ================= QUIZ ================= */
function FitbQuiz(){
  const [i,setI]=React.useState(0);
  const [ans,setA]=React.useState({});
  const [res,setR]=React.useState({});

  const q=QUESTIONS[i];
  const pageQs=QUESTIONS.filter(x=>x.page===q.page);
  const pageIndex=pageQs.findIndex(x=>x.id===q.id)+1;

  const check=()=>setR(r=>({...r,[q.id]:matchFITB(ans[q.id],q.answers)}));

  return(
  <div className="max-w-3xl w-full bg-white p-6 rounded-xl shadow">
    <h1 className="text-2xl font-bold text-center">Image Occlusion FITB</h1>
    <p className="text-center text-sm text-slate-500">Page {q.page} • Item {pageIndex} of {pageQs.length}</p>

    <img src={q.imageSrc} className="mx-auto my-4 max-h-[420px] border rounded" />

    <p className="text-lg">{q.prompt}</p>
    <input className="w-full border p-2 rounded" value={ans[q.id]||""}
      onChange={e=>setA(a=>({...a,[q.id]:e.target.value}))} />

    {res[q.id]!==undefined && (
      <p className={res[q.id]?"text-green-600":"text-red-600"}>
        {res[q.id]?"✓ Correct":"✗ Incorrect"}
      </p>
    )}

    <div className="flex justify-between mt-4">
      <button disabled={i===0} onClick={()=>setI(i-1)}>Prev</button>
      <button onClick={check}>Check</button>
      <button disabled={i===QUESTIONS.length-1} onClick={()=>setI(i+1)}>Next</button>
    </div>
  </div>);
}

ReactDOM.createRoot(document.getElementById('root')).render(<FitbQuiz/>);
</script>
</body>
</html>
